<!doctype html>
<html class="no-js" lang="zxx">


<!-- Mirrored from htmldemo.net/corano/corano/my-account.html by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 14 Mar 2024 15:25:31 GMT -->
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <title>Corano - Jewelry Shop eCommerce Bootstrap 5 Template</title>
    <meta name="robots" content="noindex, follow" />
    <meta name="description" content="">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <!-- Favicon -->
    <link rel="shortcut icon" type="image/x-icon" href="assets/img/favicon.ico">

    <!-- CSS
	============================================ -->
    <!-- google fonts -->
   
    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css">

    <link rel="stylesheet" href="assets/css/vendor/bootstrap.min.css">
    <!-- Pe-icon-7-stroke CSS -->
    <link rel="stylesheet" href="assets/css/vendor/pe-icon-7-stroke.css">
    <!-- Font-awesome CSS -->
    <link rel="stylesheet" href="assets/css/vendor/font-awesome.min.css">
    <!-- Slick slider css -->
    <link rel="stylesheet" href="assets/css/plugins/slick.min.css">
    <!-- animate css -->
    <link rel="stylesheet" href="assets/css/plugins/animate.css">
    <!-- Nice Select css -->
    <link rel="stylesheet" href="assets/css/plugins/nice-select.css">
    <!-- jquery UI css -->
    <link rel="stylesheet" href="assets/css/plugins/jqueryui.min.css">
    <!-- main style css -->
    <link rel="stylesheet" href="assets/css/style.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/sweetalert2@11.11.0/dist/sweetalert2.min.css">
    <script src="https://checkout.razorpay.com/v1/checkout.js"></script>
    <style>
    /* General Styles */
    .header-right {
    position: absolute;
    top: 3px;
    right: 10px;
}
body{
    background-color: #f5f5f5;
}


    </style>
   

</head>

<body>
     <!-- Start Header Area -->
     <header class="header-area header-wide">
        <div class="main-header d-none d-lg-block">
            <!-- Modal for warning message -->
      <div id="loginWarningModal" class="modal">
    <div class="modal-content">
        <span class="close">&times;</span>
        <p>Please log in to access this feature.</p>
    </div>
</div>

            <!-- header top start -->
            <div class="header-top bdr-bottom">
                <div class="container">
                    <div class="row align-items-center">
                        <div class="col-lg-6">
                            <div class="welcome-message">
                                <p>Welcome to MyShades sunglass online store</p>
                            </div>
                        </div>
                       


                    </div>
                </div>
            </div>
            <!-- header top end -->

            <!-- header middle area start -->
            <div class="header-main-area sticky">
                <div class="container">
                    <div class="row align-items-center position-relative">

                        <!-- start logo area -->
                        <div class="col-lg-2">
                            <div class="logo">
                                <a href="index.html">
                                    <img src="assets/img/logo/logo.png" alt="Brand Logo">
                                </a>
                            </div>
                        </div>
                        <!-- start logo area -->

                        <!-- main menu area start -->
                        <div class="col-lg-6 position-static">
                            <div class="main-menu-area">
                                <div class="main-menu">
                                    <!-- main menu navbar start -->
                                    <nav class="desktop-menu">
                                        <ul>
                                            <li class="active"><a href="/">Home </a>
                                                
                                            </li>
                                            <li class="position-static"><a href="#">pages</a>
                                                
                                                   
                                            </li>
                                            <li><a href="/products">shop </a>
                                             
                                            </li>
                                            <li><a href="blog-left-sidebar.html">Blog </a>
                                               
                                            </li>
                                            <li><a href="contact-us.html">Contact us</a></li>
                                        </ul>
                                    </nav>
                                    <!-- main menu navbar end -->
                                </div>
                            </div>
                        </div>
                        <!-- main menu area end -->

                        <!-- mini cart area start -->
                        <div class="col-lg-4">
                            <div class="header-right d-flex align-items-center justify-content-xl-between justify-content-lg-end">
                                
                                <div class="header-configure-area">
                                    <ul class="nav justify-content-end">
                                        <li class="user-hover">
                                            <a href="#">
                                                <i class="pe-7s-user"></i>
                                            </a>
                                            <ul class="dropdown-list">
                                                <% if (userID) { %>
                                                    <div class="offcanvas__links">
                                                        <!-- <p>Welcome, <%= user.name %>!</p> -->
                                                        <a href="/logout">Log out</a>
                                                    </div>
                                                    <div class="offcanvas_top_hover">
                                                        <a href="/profile">
                                                            <span>Profile <i class="arrow_carrot"></i></span>
                                                        </a>
                                                    </div>
                                                <% } else { %>
                                                    <div class="offcanvas__links">
                                                        <a href="/login">Log in</a>
                                                    </div>
                                                <% } %>
                                            </ul>
                                        </li>
                                        <li>
                                            <a href="/wishlist">
                                                <i class="pe-7s-like"></i>
                                            </a>
                                        </li>
                                        <li>
                                            <a href="#" class="minicart-btn">
                                                <i class="pe-7s-shopbag"></i>
                                            </a>
                                        </li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                        <!-- mini cart area end -->


                    </div>
                </div>
            </div>
            <!-- header middle area end -->
        </div>
        <!-- main header start -->

        <!-- mobile header start -->
        <!-- mobile header start -->
        <div class="mobile-header d-lg-none d-md-block sticky">
            <!--mobile header top start -->
            <div class="container-fluid">
                <div class="row align-items-center">
                    <div class="col-12">
                        <div class="mobile-main-header">
                            <div class="mobile-logo">
                                <a href="index.html">
                                    <img src="assets/img/logo/logo.png" alt="Brand Logo">
                                </a>
                            </div>
                            <div class="mobile-menu-toggler">
                                <div class="mini-cart-wrap">
                                    <a href="cart.html">
                                        <i class="pe-7s-shopbag"></i>
                                        <div class="notification">0</div>
                                    </a>
                                </div>
                                <button class="mobile-menu-btn">
                                    <span></span>
                                    <span></span>
                                    <span></span>
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <!-- mobile header top start -->
        </div>
        <!-- mobile header end -->
        <!-- mobile header end -->

        <!-- offcanvas mobile menu start -->
        <!-- off-canvas menu start -->
        <aside class="off-canvas-wrapper">
            <div class="off-canvas-overlay"></div>
            <div class="off-canvas-inner-content">
                <div class="btn-close-off-canvas">
                    <i class="pe-7s-close"></i>
                </div>

                <div class="off-canvas-inner">
                    <!-- search box start -->
                    <div class="search-box-offcanvas">
                        <form>
                            <input type="text" placeholder="Search Here...">
                            <button class="search-btn"><i class="pe-7s-search"></i></button>
                        </form>
                    </div>
                    <!-- search box end -->

                    <!-- mobile menu start -->
                    <div class="mobile-navigation">

                        <!-- mobile menu navigation start -->
                        <nav>
                            <ul class="mobile-menu">
                                <!-- <li class="menu-item-has-children"><a href="home">Home</a></li> -->
                                <li class="active"><a href="/">Home </a></li>
                                   

                                
                                <li class="menu-item-has-children"><a href="#">pages</a>
                                   
                                </li>
                                <li class="menu-item-has-children "><a href="/products">shop</a>
                                   
                                </li>
                                <li class="menu-item-has-children "><a href="#">Blog</a>
                                    
                                </li>
                                <li><a href="contact-us.html">Contact us</a></li>
                            </ul>
                        </nav>
                        <!-- mobile menu navigation end -->
                    </div>
                    <!-- mobile menu end -->

                    <div class="mobile-settings">
                        <ul class="nav">
                            <li>
                                <div class="dropdown mobile-top-dropdown">
                                    <a href="#" class="dropdown-toggle" id="currency" data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                        Currency
                                        <i class="fa fa-angle-down"></i>
                                    </a>
                                    <div class="dropdown-menu" aria-labelledby="currency">
                                        <a class="dropdown-item" href="#">$ USD</a>
                                        <a class="dropdown-item" href="#">$ EURO</a>
                                    </div>
                                </div>
                            </li>
                            <li>
                                <div class="dropdown mobile-top-dropdown">
                                    <a href="#" class="dropdown-toggle" id="myaccount" data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                        My Account
                                        <i class="fa fa-angle-down"></i>
                                    </a>
                                    <div class="dropdown-menu" aria-labelledby="myaccount">
                                        <a class="dropdown-item" href="my-account.html">my account</a>
                                        <a class="dropdown-item" href="login-register.html"> login</a>
                                        <a class="dropdown-item" href="login-register.html">register</a>
                                    </div>
                                </div>
                            </li>
                        </ul>
                    </div>

                    <!-- offcanvas widget area start -->
                    <div class="offcanvas-widget-area">
                        <div class="off-canvas-contact-widget">
                            <ul>
                                <li><i class="fa fa-mobile"></i>
                                    <a href="#">0123456789</a>
                                </li>
                                <li><i class="fa fa-envelope-o"></i>
                                    <a href="#">info@yourdomain.com</a>
                                </li>
                            </ul>
                        </div>
                        <div class="off-canvas-social-widget">
                            <a href="#"><i class="fa fa-facebook"></i></a>
                            <a href="#"><i class="fa fa-twitter"></i></a>
                            <a href="#"><i class="fa fa-pinterest-p"></i></a>
                            <a href="#"><i class="fa fa-linkedin"></i></a>
                            <a href="#"><i class="fa fa-youtube-play"></i></a>
                        </div>
                    </div>
                    <!-- offcanvas widget area end -->
                </div>
            </div>
        </aside>
        <!-- off-canvas menu end -->
        <!-- offcanvas mobile menu end -->
    </header>
    <!-- end Header Area -->

    <main>
        <!-- breadcrumb area start -->
        <!-- <div class="breadcrumb-area">
            <div class="container">
                <div class="row">
                    <div class="col-12">
                        <div class="breadcrumb-wrap">
                            <nav aria-label="breadcrumb">
                                <ul class="breadcrumb">
                                    <li class="breadcrumb-item"><a href="index.html"><i class="fa fa-home"></i></a></li>
                                    <li class="breadcrumb-item active" aria-current="page">my-account</li>
                                </ul>
                            </nav>
                        </div>
                    </div>
                </div>
            </div>
        </div> -->
        <!-- breadcrumb area end -->

        <% if (user) { %> <!-- Check if user is defined -->
            <main>
                <!-- my account wrapper start -->
                <div class="my-account-wrapper section-padding">
                    <div class="container">
                        <div class="section-bg-color">
                            <div class="row">
                                <div class="col-lg-12">
                                    <!-- My Account Page Start -->
                                    <div class="myaccount-page-wrapper">
                                        <!-- My Account Tab Menu Start -->
                                        <div class="row">
                                            <div class="col-lg-3 col-md-4">
                                                <div class="myaccount-tab-menu nav" role="tablist">
                                                    <a href="/profile"><i class="fa fa-dashboard"></i> Dashboard</a>
                                                    <a href="/orders" class="active"><i class="fa fa-cart-arrow-down"></i> Orders</a>
                                                   
                                                    <a href="/wallet"><i class="fa fa-credit-card"></i> Wallet</a>
                                                    <a href="/address"><i class="fa fa-map-marker"></i> Address</a>
                                                    <a href="/accountDetails"><i class="fa fa-user"></i> Account Details</a>
                                                    <a href="/logout"><i class="fa fa-sign-out"></i> Logout</a>
                                                </div>
                                            </div>
                                            <!-- Single Tab Content Start -->
                                            <div class="col-lg-9 col-md-8">
                                                <% if (orders) { %> <!-- Check if order is defined -->
                                                    <section class="mb-4">
                                                        <h2 class="h4">Products</h2>
                                                        <table class="table table-striped">
                                                            <thead>
                                                                <tr>
                                                                    <th>Product Name</th>
                                                                    <th>Quantity</th>
                                                                    <th>Color</th>
                                                                    <th>Amount</th>
                                                                </tr>
                                                            </thead>
                                                            <tbody>
                                                                <% orders.products.forEach(productItem => { %>
                                                                    <tr>
                                                                        <td>
                                                                            <img src="/uploads/product-images/<%= productItem.product.image[0] %>" width="40" height="40" class="img-xs" alt="Item">
                                                                            <%= productItem.product.name %>
                                                                        </td>
                                                                        <td><%= productItem.quantity %></td>
                                                                        <td><%= productItem.color %></td>
                                                                        <td>$<%= productItem.amount %></td>
                                                                    </tr>
                                                                <% }); %>
                                                            </tbody>
                                                        </table>
                                                    </section>
        
                                                    <div class="row">
                                                        <div class="col-lg-6 col-md-4">
                                                            <section class="mb-4">
                                                                <h2 class="h4">Shipping Address</h2>
                                                                <div class="card">
                                                                    <div class="card-body">
                                                                        <p><strong>Name:</strong> <%= orders.address.name %></p>
                                                                        <p><strong>Mobile:</strong> <%= orders.address.mobile %></p>
                                                                        <p><strong>Pincode:</strong> <%= orders.address.pincode %></p>
                                                                        <p><strong>Locality:</strong> <%= orders.address.locality %></p>
                                                                        <p><strong>Address:</strong> <%= orders.address.address %></p>
                                                                        <p><strong>City:</strong> <%= orders.address.city %></p>
                                                                        <p><strong>State:</strong> <%= orders.address.state %></p>
                                                                        <p><strong>Country:</strong> <%= orders.address.country %></p>
                                                                    </div>
                                                                </div>
                                                            </section>
                                                        </div>
                                                        <div class="col-lg-6 col-md-4">
                                                            <section class="mb-4">
                                                                <h2 class="h4">Order Information</h2>
                                                                <div class="card">
                                                                    <div class="card-body">
                                                                        <input type="hidden" name="cartID" value="<%= cartID %>">
                                                                        <p><strong>Order ID:</strong> <%= orders._id %></p>
                                                                        <p><strong>Date:</strong> <%= new Date(orders.date).toLocaleDateString() %></p>
                                                                        <p><strong>Status:</strong> <%= orders.status %></p>
                                                                        <p><strong>Payment Method:</strong> <%= orders.paymentmethod %></p>
                                                                        <% if (orders.coupon) { %>
                                                                            <p><strong>Coupon Applied:</strong> <%= orders.coupon %></p>
                                                                        <% } %>
                                                                        <p><strong>Total Amount:</strong> â‚¹<%= orders.totalamount %></p>
                                                                        <% if (orders.status === 'Confirmed') { %>
                                                                            <button onclick="cancelOrder('<%= orders._id %>')" class="btn btn-danger">Cancel Order</button>
                                                                        <% } else if (orders.status === 'Delivered') { %>
                                                                            <button onclick="returnOrder('<%= orders._id %>')" class="btn btn-warning">Return Order</button>
                                                                        <% } else if(orders.status==='Payment Failed'){%> 
                                                                       
                                                                        <button onclick="placeOrder('<%= orders._id %>')" class="btn btn-primary">Reorder</button>
                                                                        <% } %>
                                                                        <% if (orders && orders.status === 'Delivered') { %>
                                                                            <div class="mt-3">
                                                                                <input type="hidden" value="<%= JSON.stringify(orders) %>" id="orderData">
                                                                                <button class="btn btn-secondary" id="invoiceButton" onclick="invoiceDownload()">Download Invoice</button>
                                                                            </div>
                                                                        <% } %>
                                                                    </div>
                                                                </div>
                                                            </section>
                                                        </div>
                                                    </div>
                                                <% } else { %>
                                                    <p>Order not found</p>
                                                <% } %>
                                            </div>
                                        </div>
                                    </div>
                                    <!-- My Account Page End -->
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <!-- my account wrapper end -->
            </main>
        <% } else { %>
            <p>User not found</p>
        <% } %>
        
                                     <!-- footer area start -->
    <footer class="footer-widget-area">
        <div class="footer-top section-padding">
            <div class="container">
                <div class="row">
                    <div class="col-lg-3 col-md-6">
                        <div class="widget-item">
                            <div class="widget-title">
                                <div class="widget-logo">
                                    <a href="index.html">
                                        <img src="assets/img/logo/logo.png" alt="brand logo">
                                    </a>
                                </div>
                            </div>
                            <div class="widget-body">
                                <p>We are a team of designers and developers that create high quality wordpress, shopify, Opencart </p>
                            </div>
                        </div>
                    </div>
                    <div class="col-lg-3 col-md-6">
                        <div class="widget-item">
                            <h6 class="widget-title">Contact Us</h6>
                            <div class="widget-body">
                                <address class="contact-block">
                                    <ul>
                                        <li><i class="pe-7s-home"></i> 4710-4890 Breckinridge USA</li>
                                        <li><i class="pe-7s-mail"></i> <a href="mailto:demo@plazathemes.com">demo@yourdomain.com </a></li>
                                        <li><i class="pe-7s-call"></i> <a href="tel:(012)800456789987">(012) 800 456 789-987</a></li>
                                    </ul>
                                </address>
                            </div>
                        </div>
                    </div>
                    <div class="col-lg-3 col-md-6">
                        <div class="widget-item">
                            <h6 class="widget-title">Information</h6>
                            <div class="widget-body">
                                <ul class="info-list">
                                    <li><a href="#">about us</a></li>
                                    <li><a href="#">Delivery Information</a></li>
                                    <li><a href="#">privet policy</a></li>
                                    <li><a href="#">Terms & Conditions</a></li>
                                    <li><a href="#">contact us</a></li>
                                    <li><a href="#">site map</a></li>
                                </ul>
                            </div>
                        </div>
                    </div>
                    <div class="col-lg-3 col-md-6">
                        <div class="widget-item">
                            <h6 class="widget-title">Follow Us</h6>
                            <div class="widget-body social-link">
                                <a href="#"><i class="fa fa-facebook"></i></a>
                                <a href="#"><i class="fa fa-twitter"></i></a>
                                <a href="#"><i class="fa fa-instagram"></i></a>
                                <a href="#"><i class="fa fa-youtube"></i></a>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="row align-items-center mt-20">
                    <div class="col-md-6">
                        <div class="newsletter-wrapper">
                            <h6 class="widget-title-text">Signup for newsletter</h6>
                            <form class="newsletter-inner" id="mc-form">
                                <input type="email" class="news-field" id="mc-email" autocomplete="off" placeholder="Enter your email address">
                                <button class="news-btn" id="mc-submit">Subscribe</button>
                            </form>
                            <!-- mail-chimp-alerts Start -->
                            <div class="mailchimp-alerts">
                                <div class="mailchimp-submitting"></div><!-- mail-chimp-submitting end -->
                                <div class="mailchimp-success"></div><!-- mail-chimp-success end -->
                                <div class="mailchimp-error"></div><!-- mail-chimp-error end -->
                            </div>
                            <!-- mail-chimp-alerts end -->
                        </div>
                    </div>
                    <div class="col-md-6">
                        <div class="footer-payment">
                            <img src="assets/img/payment.png" alt="payment method">
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="footer-bottom">
            <div class="container">
                <div class="row">
                    <div class="col-12">
                        <div class="copyright-text text-center">
                            <p>&copy; 2022 <b>Corano</b> Made with <i class="fa fa-heart text-danger"></i> by <a href="https://hasthemes.com/"><b>HasThemes</b></a></p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </footer>
    <!-- footer area end -->

    <!-- Quick view modal start -->
    <div class="modal" id="quick_view">
        <div class="modal-dialog modal-lg modal-dialog-centered">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-bs-dismiss="modal">&times;</button>
                </div>
                <div class="modal-body">
                    <!-- product details inner end -->
                    <div class="product-details-inner">
                        <div class="row">
                            <div class="col-lg-5">
                                <div class="product-large-slider">
                                    <div class="pro-large-img img-zoom">
                                        <img src="assets/img/product/product-details-img1.jpg" alt="product-details" />
                                    </div>
                                    <div class="pro-large-img img-zoom">
                                        <img src="assets/img/product/product-details-img2.jpg" alt="product-details" />
                                    </div>
                                    <div class="pro-large-img img-zoom">
                                        <img src="assets/img/product/product-details-img3.jpg" alt="product-details" />
                                    </div>
                                    <div class="pro-large-img img-zoom">
                                        <img src="assets/img/product/product-details-img4.jpg" alt="product-details" />
                                    </div>
                                    <div class="pro-large-img img-zoom">
                                        <img src="assets/img/product/product-details-img5.jpg" alt="product-details" />
                                    </div>
                                </div>
                                <div class="pro-nav slick-row-10 slick-arrow-style">
                                    <div class="pro-nav-thumb">
                                        <img src="assets/img/product/product-details-img1.jpg" alt="product-details" />
                                    </div>
                                    <div class="pro-nav-thumb">
                                        <img src="assets/img/product/product-details-img2.jpg" alt="product-details" />
                                    </div>
                                    <div class="pro-nav-thumb">
                                        <img src="assets/img/product/product-details-img3.jpg" alt="product-details" />
                                    </div>
                                    <div class="pro-nav-thumb">
                                        <img src="assets/img/product/product-details-img4.jpg" alt="product-details" />
                                    </div>
                                    <div class="pro-nav-thumb">
                                        <img src="assets/img/product/product-details-img5.jpg" alt="product-details" />
                                    </div>
                                </div>
                            </div>
                            <div class="col-lg-7">
                                <div class="product-details-des">
                                    <div class="manufacturer-name">
                                        <a href="product-details.html">HasTech</a>
                                    </div>
                                    <h3 class="product-name">Handmade Golden Necklace</h3>
                                    <div class="ratings d-flex">
                                        <span><i class="fa fa-star-o"></i></span>
                                        <span><i class="fa fa-star-o"></i></span>
                                        <span><i class="fa fa-star-o"></i></span>
                                        <span><i class="fa fa-star-o"></i></span>
                                        <span><i class="fa fa-star-o"></i></span>
                                        <div class="pro-review">
                                            <span>1 Reviews</span>
                                        </div>
                                    </div>
                                    <div class="price-box">
                                        <span class="price-regular">$70.00</span>
                                        <span class="price-old"><del>$90.00</del></span>
                                    </div>
                                    <h5 class="offer-text"><strong>Hurry up</strong>! offer ends in:</h5>
                                    <div class="product-countdown" data-countdown="2022/12/20"></div>
                                    <div class="availability">
                                        <i class="fa fa-check-circle"></i>
                                        <span>200 in stock</span>
                                    </div>
                                    <p class="pro-desc">Lorem ipsum dolor sit amet, consetetur sadipscing elitr, sed diam nonumy eirmod tempor invidunt ut labore et dolore magna.</p>
                                    <div class="quantity-cart-box d-flex align-items-center">
                                        <h6 class="option-title">qty:</h6>
                                        <div class="quantity">
                                            <div class="pro-qty"><input type="text" value="1"></div>
                                        </div>
                                        <div class="action_link">
                                            <a class="btn btn-cart2" href="#">Add to cart</a>
                                        </div>
                                    </div>
                                    <div class="useful-links">
                                        <a href="#" data-bs-toggle="tooltip" title="Compare"><i
                                            class="pe-7s-refresh-2"></i>compare</a>
                                        <a href="#" data-bs-toggle="tooltip" title="Wishlist"><i
                                            class="pe-7s-like"></i>wishlist</a>
                                    </div>
                                    <div class="like-icon">
                                        <a class="facebook" href="#"><i class="fa fa-facebook"></i>like</a>
                                        <a class="twitter" href="#"><i class="fa fa-twitter"></i>tweet</a>
                                        <a class="pinterest" href="#"><i class="fa fa-pinterest"></i>save</a>
                                        <a class="google" href="#"><i class="fa fa-google-plus"></i>share</a>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div> <!-- product details inner end -->
                </div>
            </div>
        </div>
    </div>
    <!-- Quick view modal end -->

    <!-- offcanvas mini cart start -->
    <div class="offcanvas-minicart-wrapper">
        <div class="minicart-inner">
            <div class="offcanvas-overlay"></div>
            <div class="minicart-inner-content">
                <div class="minicart-close">
                    <i class="pe-7s-close"></i>
                </div>
                <div class="minicart-content-box">
                    <div class="minicart-item-wrapper">
                        <ul>
                            <li class="minicart-item">
                                <div class="minicart-thumb">
                                    <a href="product-details.html">
                                        <img src="assets/img/cart/cart-1.jpg" alt="product">
                                    </a>
                                </div>
                                <div class="minicart-content">
                                    <h3 class="product-name">
                                        <a href="product-details.html">Dozen White Botanical Linen Dinner Napkins</a>
                                    </h3>
                                    <p>
                                        <span class="cart-quantity">1 <strong>&times;</strong></span>
                                        <span class="cart-price">$100.00</span>
                                    </p>
                                </div>
                                <button class="minicart-remove"><i class="pe-7s-close"></i></button>
                            </li>
                            <li class="minicart-item">
                                <div class="minicart-thumb">
                                    <a href="product-details.html">
                                        <img src="assets/img/cart/cart-2.jpg" alt="product">
                                    </a>
                                </div>
                                <div class="minicart-content">
                                    <h3 class="product-name">
                                        <a href="product-details.html">Dozen White Botanical Linen Dinner Napkins</a>
                                    </h3>
                                    <p>
                                        <span class="cart-quantity">1 <strong>&times;</strong></span>
                                        <span class="cart-price">$80.00</span>
                                    </p>
                                </div>
                                <button class="minicart-remove"><i class="pe-7s-close"></i></button>
                            </li>
                        </ul>
                    </div>

                    <div class="minicart-pricing-box">
                        <ul>
                            <li>
                                <span>sub-total</span>
                                <span><strong>$300.00</strong></span>
                            </li>
                            <li>
                                <span>Eco Tax (-2.00)</span>
                                <span><strong>$10.00</strong></span>
                            </li>
                            <li>
                                <span>VAT (20%)</span>
                                <span><strong>$60.00</strong></span>
                            </li>
                            <li class="total">
                                <span>total</span>
                                <span><strong>$370.00</strong></span>
                            </li>
                        </ul>
                    </div>

                    <div class="minicart-button">
                        <a href="cart.html"><i class="fa fa-shopping-cart"></i> View Cart</a>
                        <a href="cart.html"><i class="fa fa-share"></i> Checkout</a>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- offcanvas mini cart end -->

    <!-- JS
============================================ -->

    <!-- Modernizer JS -->
    <script src="assets/js/vendor/modernizr-3.6.0.min.js"></script>
    <!-- jQuery JS -->
    <script src="assets/js/vendor/jquery-3.6.0.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11.11.0/dist/sweetalert2.all.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/easyinvoice/dist/easyinvoice.min.js"></script>
    <!-- Bootstrap JS -->
    <script src="assets/js/vendor/bootstrap.bundle.min.js"></script>
    <!-- slick Slider JS -->
    <script src="assets/js/plugins/slick.min.js"></script>
    <!-- Countdown JS -->
    <script src="assets/js/plugins/countdown.min.js"></script>
    <!-- Nice Select JS -->
    <script src="assets/js/plugins/nice-select.min.js"></script>
    <!-- jquery UI JS -->
    <script src="assets/js/plugins/jqueryui.min.js"></script>
    <!-- Image zoom JS -->
    <script src="assets/js/plugins/image-zoom.min.js"></script>
    <!-- Images loaded JS -->
    <script src="assets/js/plugins/imagesloaded.pkgd.min.js"></script>
    <!-- mail-chimp active js -->
    <script src="assets/js/plugins/ajaxchimp.js"></script>
    <!-- contact form dynamic js -->
    <script src="assets/js/plugins/ajax-mail.js"></script>
    <!-- google map api -->
    <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyCfmCVTjRI007pC1Yk2o2d_EhgkjTsFVN8"></script>
    <!-- google map active js -->
    <script src="assets/js/plugins/google-map.js"></script>
    <!-- Main JS -->
    <script src="assets/js/main.js"></script>

   <script>
    function invoiceDownload() {

let orderDetails = JSON.parse(document.getElementById('orderData').value)
console.log(orderDetails);

Swal.fire({
    title: 'Are you sure!',
    text: 'Are you want to download the invoice',
    icon: 'question',
    showCancelButton: true,
    confirmButtonText: 'Ok',
    cancelButtonText: 'Cancel'
}).then((result) => {
    if (result.isConfirmed) {

        let products = orderDetails.products.map((item) => {
            return {
                quantity: item.quantity,
                description: item.product.name,
                tax: 0,
                price:  orderDetails.totalamount, 
        
            }
        });

        const data = {
            "apiKey": "free",
            "mode": "development",
            "documentTitle": "INVOICE Aromatica",
            "currency": "INR",
            "taxNotation": "GST",
            "marginTop": 20,
            "marginRight": 20,
            "marginLeft": 20,
            "marginBottom": 20,
            "logo": "https://public.easyinvoice.cloud/img/logo_en_original.png",
            "sender": {
                "company": "MyShades",
                "address": "Maradu, Kochi",
                "zip": "1234 AB",
                "city": "Kochi",
                "country": "India"
            },
            "client": {
                "company": orderDetails.address.name,
                "address": orderDetails.address.addressLine,
                "zip": orderDetails.address.pincode,
                "city": orderDetails.address.city,
                "country": "India"
            },
            "invoiceNumber": orderDetails._id,
            "invoiceDate": new Date().toLocaleDateString(),
            "products": products,
            "bottomNotice": "Thank you for your business."
        };
        easyinvoice.createInvoice(data, function (result) {
            easyinvoice.download('MyShades_invoice.pdf', result.pdf);
        });
    }
})
}
   </script>
   
    <script>
       function cancelOrder(orderID) {
    Swal.fire({
        title: 'Are you sure?',
        text: 'Do you really want to cancel this order?',
        icon: 'warning',
        showCancelButton: true,
        confirmButtonColor: '#3085d6',
        cancelButtonColor: '#d33',
        confirmButtonText: 'Yes, cancel it!',
        cancelButtonText: 'No, keep it'
    }).then((result) => {
        if (result.isConfirmed) {
            fetch('/cancelorder', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify({ orderID })
            })
            .then(response => response.json())
            .then(data => {
                if (data.success) {
                    Swal.fire(
                        'Cancelled!',
                        'Your order has been cancelled.',
                        'success'
                    ).then(() => {
                        window.location.reload();
                    });
                } else {
                    Swal.fire(
                        'Error!',
                        'There was an issue cancelling your order. Please try again.',
                        'error'
                    );
                }
            })
            .catch(error => {
                Swal.fire(
                    'Error!',
                    'There was an issue cancelling your order. Please try again.',
                    'error'
                );
            });
        }
    });
}

function back() {
    window.location.href = '/orders';
}
    
        function returnOrder(orderID) {
            Swal.fire({
                title: 'Are you sure?',
                text: 'Are you sure, you want to return the product ',
                icon: 'warning',
                showCancelButton: true,
                confirmButtonText: 'Yes, change it!',
                cancelButtonText: 'No, cancel!',
            })
                .then((result) => {
                    if (result.isConfirmed) {
                        fetch('/return', {
                            method: 'post',
                            headers: {
                                'Content-Type': 'application/json'
                            },
                            body: JSON.stringify({ orderID })
                        })
                            .then(response => response.json())
                            .then((data) => {
                                if (data.success) {
                                    Swal.fire({
                                        title: 'Status has changed',
                                        text: 'The status has changed successfully',
                                        icon: 'success'
                                    })
                                        .then(() => {
                                            window.location.href = "/orders"
                                        })
                                }
                            })
                    }
                })
        }
    
        function cancelReturn(orderID) {
            fetch('/cancelreturn', {
                method: 'post',
                headers: {
                    'Content-type': 'Application/json'
                },
                body: JSON.stringify({ orderID })
            })
                .then(response => response.json())
                .then((data) => {
                    if (data.success) {
                        window.location.href = "/orders"
                    }
                })
        }
    
        function placeOrder(id) {
            const cartID = document.querySelector('input[name="cartID"]').value;
    fetch('/payagain', {
        method: 'POST',
        headers: {
            'Content-Type': 'application/json'
        },
        body: JSON.stringify({ id ,cartID})
    })
    .then(response => response.json())
    .then(data => {
        if (data.orderID) {
            Swal.close();
            const options = {
                "key": 'rzp_test_8oA5wZD2fGxjcW', // Replace with your actual Razorpay key
                "amount": data.orderID.amount,
                "currency": "INR",
                "name": "myshade",
                "description": "Order Payment",
                "image": "https://example.com/your_logo", // Replace with your actual logo URL
                "order_id": data.orderID.id,
                "handler": function (response) {
                    verifyPayment(response, data.orderID.id);
                },
                "prefill": {
                    "name": "Lakshmi A P", // Replace with actual user details
                    "email": "lakshmiap97@gmail.com", // Replace with actual user details
                    "contact": "9999999999" // Replace with actual user details
                },
                "notes": {
                    "address": "Razorpay Corporate Office" // Replace with your actual address if needed
                },
                "theme": {
                    "color": "#3399cc"
                }
            };
            var rzp = new Razorpay(options);
            rzp.open();
        } else {
            Swal.fire({
                title: 'Error',
                text: 'Failed to create the order. Please try again.',
                icon: 'error'
            });
        }
    })
    .catch(error => {
        Swal.fire({
            title: 'Error',
            text: 'An error occurred. Please try again later.',
            icon: 'error'
        });
        console.error('Error:', error);
    });
}

function verifyPayment(response, orderId,cartID) {
   
    fetch('/successpayment', {
        method: 'POST',
        headers: {
            'Content-Type': 'application/json'
        },
        body: JSON.stringify({
            response,
            orderId,
            cartID
        })
    })
    .then(response => response.json())
    .then(data => {
        if (data.success) {
            Swal.fire({
                title: 'Payment Successful!',
                text: 'Your payment was successfully verified. Redirecting to your orders...',
                icon: 'success',
                timer: 3000,
                showConfirmButton: false,
                willClose: () => {
                    window.location.href = "/orders";
                }
            });
        } else {
            Swal.fire({
                title: 'Verification Failed',
                text: 'There was an issue with verifying your payment. Please contact support.',
                icon: 'error'
            });
        }
    })
    .catch(error => {
        Swal.fire({
            title: 'Error',
            text: 'An error occurred while verifying your payment. Please try again later.',
            icon: 'error'
        });
        console.error('Error:', error);
    });
}

    </script>
    <script>
        // Assuming userID is set by the server-side template engine
        const userID = '<%= userID %>';
    
        document.addEventListener('DOMContentLoaded', () => {
            document.getElementById('view-cart-button').addEventListener('click', viewCart);
            document.getElementById('checkout-button').addEventListener('click', checkout);
        });
    
        function viewCart() {
            // Logic for viewing the cart
            // window.location.href = '/cart';
            const userID = '<%= userID %>';
        
        if (userID) {
            window.location.href = '/cart';
        } else {
            Swal.fire({
                icon: 'error',
                title: 'Oops...',
                text: 'User not logged in. Please log in to view your cart.',
                footer: '<a href="/login">Login here</a>'
            }).then(() => {
                window.location.reload();
            });
        }
        }
    
    
        function checkout() {
            const userID = '<%= userID %>'; // Make sure to set userID correctly
            if (!userID) {
                // Use SweetAlert to show the message
                Swal.fire({
                    icon: 'error',
                    title: 'Oops...',
                    text: 'User not logged in',
                    footer: '<a href="/login">Login here</a>'
                }).then(() => {
                    window.location.href = '/products?message=User not logged in';
                });
            } else {
                fetch('/checkOut')
                    .then(response => {
                        if (!response.ok) {
                            return response.json().then(data => {
                                throw new Error(data.message);
                            });
                        }
                        window.location.href = '/checkOut';
                    })
                    .catch(error => {
                        // Use SweetAlert to show the error message
                        Swal.fire({
                            icon: 'error',
                            title: 'Error',
                            text: error.message
                        }).then(() => {
                            window.location.reload(); // Reload the current page
                        });
                    });
            }
        }
    </script>
   

   
    
</body>


<!-- Mirrored from htmldemo.net/corano/corano/my-account.html by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 14 Mar 2024 15:25:31 GMT -->
</html>